<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Multibias example: NHANES</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Multibias example: NHANES</h1>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>Epidemiologic studies often face multiple sources of bias, including
confounding, measurement error, and selection bias. Investigators
typically address these biases by speculating on the direction of their
effect or by adjusting for a single source of bias. The
<code>multibias</code> package provides a framework for simultaneously
adjusting for multiple sources of bias.</p>
<p>This vignette demonstrates how to use <code>multibias</code> to
analyze the relationship between alcohol consumption and mortality using
data from the National Health and Nutrition Examination Survey (NHANES).
We’ll progressively add different types of bias adjustments to show how
each affects our estimates and how they can be combined for a more
comprehensive analysis.</p>
</div>
<div id="setup" class="section level2">
<h2>Setup</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(multibias)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<p>For this demonstration, we’ll use the 2013-2018 <a href="https://www.cdc.gov/nchs/nhanes/about/index.html">National Health
and Nutrition Examination Survey</a> (NHANES) data linked to the <a href="https://www.cdc.gov/nchs/data-linkage/mortality-public.htm">CDC’s
2019 public-use mortality data</a>. This dataset provides a rich source
of information including:</p>
<ul>
<li>Demographics</li>
<li>24-hour dietary recall</li>
<li>Alcohol consumption patterns</li>
<li>Smoking history</li>
<li>Mortality outcomes</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>nhanes <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;nhanes.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="data-preparation-and-initial-exploration" class="section level2">
<h2>Data Preparation and Initial Exploration</h2>
<p>We’ll be assessing the risk of alcohol intake on all-cause mortality,
specifically comparing “extreme” drinkers to “non-extreme” drinkers.
Let’s first understand our data and create our exposure variable.</p>
<div id="creating-the-exposure-variable" class="section level3">
<h3>Creating the Exposure Variable</h3>
<p>We’ll anchor our classification based on the US Dietary Guidelines
for Americans (USDGA) suggested limit:</p>
<ul>
<li>14 g/day for women</li>
<li>28 g/day for men</li>
</ul>
<p>Participants are classified as “extreme drinkers” if they reported
drinking more than 1.5x these guidelines.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>nhanes_filtered <span class="ot">&lt;-</span> nhanes <span class="sc">|&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">alcohol_extreme =</span> <span class="fu">case_when</span>(</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>    alcohol_day_total <span class="sc">&gt;</span> <span class="dv">14</span> <span class="sc">*</span> <span class="fl">1.5</span> <span class="sc">&amp;</span> gender_female <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>    alcohol_day_total <span class="sc">&gt;</span> <span class="dv">28</span> <span class="sc">*</span> <span class="fl">1.5</span> <span class="sc">&amp;</span> gender_female <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>  )) <span class="sc">|&gt;</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">&gt;=</span> <span class="dv">18</span>) <span class="sc">|&gt;</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>  <span class="fu">filter</span>(eligstat <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>  <span class="fu">filter</span>(alcohol_12mo <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code></pre></div>
</div>
<div id="data-characteristics" class="section level3">
<h3>Data Characteristics</h3>
<p>Let’s examine the key characteristics of our dataset:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>exposure_outcome_table <span class="ot">&lt;-</span> nhanes_filtered <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="fu">group_by</span>(alcohol_extreme, mortstat) <span class="sc">|&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">proportion =</span> count <span class="sc">/</span> <span class="fu">sum</span>(count))</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="co">#&gt; `summarise()` has grouped output by &#39;alcohol_extreme&#39;. You can override using</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="co">#&gt; the `.groups` argument.</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="co"># Distribution of Exposure and Outcome:</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="fu">print</span>(exposure_outcome_table)</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 × 4</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="co">#&gt;   alcohol_extreme mortstat count proportion</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co">#&gt;             &lt;dbl&gt;    &lt;int&gt; &lt;int&gt;      &lt;dbl&gt;</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="co">#&gt; 1               0        0  8412    0.856  </span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="co">#&gt; 2               0        1   281    0.0286 </span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="co">#&gt; 3               1        0  1089    0.111  </span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="co">#&gt; 4               1        1    44    0.00448</span></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a>demographic_table <span class="ot">&lt;-</span> nhanes_filtered <span class="sc">|&gt;</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a>  <span class="fu">group_by</span>(alcohol_extreme) <span class="sc">|&gt;</span></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a>    <span class="at">age_mean =</span> <span class="fu">mean</span>(age),</span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a>    <span class="at">age_sd =</span> <span class="fu">sd</span>(age),</span>
<span id="cb4-25"><a href="#cb4-25" tabindex="-1"></a>    <span class="at">gender_prop =</span> <span class="fu">mean</span>(gender_female)</span>
<span id="cb4-26"><a href="#cb4-26" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb4-27"><a href="#cb4-27" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-28"><a href="#cb4-28" tabindex="-1"></a>    <span class="at">alcohol_extreme =</span> <span class="fu">if_else</span>(</span>
<span id="cb4-29"><a href="#cb4-29" tabindex="-1"></a>      alcohol_extreme <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&quot;Extreme&quot;</span>, <span class="st">&quot;Non-extreme&quot;</span></span>
<span id="cb4-30"><a href="#cb4-30" tabindex="-1"></a>    )</span>
<span id="cb4-31"><a href="#cb4-31" tabindex="-1"></a>  )</span>
<span id="cb4-32"><a href="#cb4-32" tabindex="-1"></a></span>
<span id="cb4-33"><a href="#cb4-33" tabindex="-1"></a><span class="co"># Demographic Characteristics by Exposure Status:</span></span>
<span id="cb4-34"><a href="#cb4-34" tabindex="-1"></a><span class="fu">print</span>(demographic_table)</span>
<span id="cb4-35"><a href="#cb4-35" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 × 5</span></span>
<span id="cb4-36"><a href="#cb4-36" tabindex="-1"></a><span class="co">#&gt;   alcohol_extreme     n age_mean age_sd gender_prop</span></span>
<span id="cb4-37"><a href="#cb4-37" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;           &lt;int&gt;    &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;</span></span>
<span id="cb4-38"><a href="#cb4-38" tabindex="-1"></a><span class="co">#&gt; 1 Non-extreme      8693     46.2   17.8       0.486</span></span>
<span id="cb4-39"><a href="#cb4-39" tabindex="-1"></a><span class="co">#&gt; 2 Extreme          1133     45.1   15.8       0.454</span></span></code></pre></div>
</div>
</div>
<div id="base-model-analysis" class="section level2">
<h2>Base Model Analysis</h2>
<p>Let’s start with a basic logistic regression model to estimate the
association between extreme alcohol consumption and mortality, adjusting
for age and gender. This will serve as our reference point for comparing
bias-adjusted estimates.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>base_mod <span class="ot">&lt;-</span> <span class="fu">glm</span>(</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  mortstat <span class="sc">~</span> alcohol_extreme <span class="sc">+</span> gender_female <span class="sc">+</span> age,</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  <span class="at">data =</span> nhanes_filtered,</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">&quot;logit&quot;</span>)</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>)</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>base_results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>  <span class="at">term =</span> <span class="fu">c</span>(<span class="st">&quot;Extreme Alcohol Use&quot;</span>, <span class="st">&quot;Female Gender&quot;</span>, <span class="st">&quot;Age&quot;</span>),</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>  <span class="at">estimate =</span> <span class="fu">round</span>(<span class="fu">exp</span>(<span class="fu">coef</span>(base_mod)), <span class="dv">2</span>)[<span class="sc">-</span><span class="dv">1</span>],</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>  <span class="at">ci_lower =</span> <span class="fu">round</span>(<span class="fu">exp</span>(<span class="fu">confint</span>(base_mod)), <span class="dv">2</span>)[<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>],</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>  <span class="at">ci_upper =</span> <span class="fu">round</span>(<span class="fu">exp</span>(<span class="fu">confint</span>(base_mod)), <span class="dv">2</span>)[<span class="sc">-</span><span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>)</span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="co">#&gt; Waiting for profiling to be done...</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="co">#&gt; Waiting for profiling to be done...</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="co"># Base Model Results: Odds Ratios and 95% Confidence Intervals</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a><span class="fu">print</span>(base_results)</span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="co">#&gt;                                term estimate ci_lower ci_upper</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="co">#&gt; alcohol_extreme Extreme Alcohol Use     1.56     1.10     2.17</span></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a><span class="co">#&gt; gender_female         Female Gender     0.68     0.54     0.86</span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a><span class="co">#&gt; age                             Age     1.09     1.08     1.10</span></span></code></pre></div>
<p>Our base model suggests that extreme alcohol consumption is
associated with a 1.6-fold increase in mortality risk (95% CI: 1.1,
2.2), after adjusting for age and gender. However, this estimate may be
biased due to several factors that we’ll address in the following
sections.</p>
</div>
<div id="multiple-bias-analysis" class="section level2">
<h2>Multiple Bias Analysis</h2>
<p>We’ll now progressively adjust for three types of bias:</p>
<ol style="list-style-type: decimal">
<li>Uncontrolled confounding (smoking status)</li>
<li>Exposure misclassification (alcohol underreporting)</li>
<li>Selection bias (NHANES sampling weights)</li>
</ol>
<div id="adjusting-for-uncontrolled-confounding" class="section level3">
<h3>1. Adjusting for Uncontrolled Confounding</h3>
<p>Smoking is a strong confounder in the relationship between alcohol
consumption and mortality. Smokers are more likely to be heavy drinkers,
and smoking independently increases mortality risk. Our base model
didn’t account for this, potentially leading to biased estimates.</p>
<p>To adjust for the bias here, we’ll leverage a validation dataset; for
a fraction of our cohort of patients, we have smoking information
available.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Create observed data object with uncontrolled confounding bias</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>df_obs1 <span class="ot">&lt;-</span> <span class="fu">data_observed</span>(</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>  <span class="at">data =</span> nhanes_filtered,</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>  <span class="at">bias =</span> <span class="st">&quot;uc&quot;</span>,</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>  <span class="at">exposure =</span> <span class="st">&quot;alcohol_extreme&quot;</span>,</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>  <span class="at">outcome =</span> <span class="st">&quot;mortstat&quot;</span>,</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>  <span class="at">confounders =</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender_female&quot;</span>)</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>)</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="co"># Create validation data with smoking information</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>df_temp1 <span class="ot">&lt;-</span> nhanes_filtered <span class="sc">|&gt;</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(smoked_100cigs))</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a>df_val1 <span class="ot">&lt;-</span> <span class="fu">data_validation</span>(</span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a>  <span class="at">data =</span> df_temp1,</span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a>  <span class="at">true_exposure =</span> <span class="st">&quot;alcohol_extreme&quot;</span>,</span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a>  <span class="at">true_outcome =</span> <span class="st">&quot;mortstat&quot;</span>,</span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a>  <span class="at">confounders =</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender_female&quot;</span>, <span class="st">&quot;smoked_100cigs&quot;</span>)</span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a>)</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a><span class="co"># Perform bias adjustment</span></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a>uc_adjusted <span class="ot">&lt;-</span> <span class="fu">multibias_adjust</span>(df_obs1, df_val1)</span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a><span class="co"># Uncontrolled Confounding Adjusted Results:</span></span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a><span class="fu">print</span>(uc_adjusted)</span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a><span class="co">#&gt; $estimate</span></span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a><span class="co">#&gt; [1] 1.411961</span></span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a><span class="co">#&gt; $ci</span></span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a><span class="co">#&gt; [1] 1.003703 1.986279</span></span></code></pre></div>
</div>
<div id="adding-exposure-misclassification-adjustment" class="section level3">
<h3>2. Adding Exposure Misclassification Adjustment</h3>
<p>Self-reported alcohol consumption is often underreported due to
social stigma. We’ll adjust for this by assuming that certain
demographic groups (wealthy, college-educated individuals) are more
likely to under-report their alcohol consumption.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># Create observed data object with both biases</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>df_obs2 <span class="ot">&lt;-</span> <span class="fu">data_observed</span>(</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  <span class="at">data =</span> nhanes_filtered,</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>  <span class="at">bias =</span> <span class="fu">c</span>(<span class="st">&quot;em&quot;</span>, <span class="st">&quot;uc&quot;</span>),</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>  <span class="at">exposure =</span> <span class="st">&quot;alcohol_extreme&quot;</span>,</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>  <span class="at">outcome =</span> <span class="st">&quot;mortstat&quot;</span>,</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>  <span class="at">confounders =</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender_female&quot;</span>)</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>)</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="co"># Create validation data with adjusted alcohol consumption</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>df_temp2 <span class="ot">&lt;-</span> nhanes_filtered <span class="sc">|&gt;</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(smoked_100cigs)) <span class="sc">|&gt;</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>    <span class="co"># Assume 50% higher consumption for high SES individuals</span></span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>    <span class="at">alcohol_adj =</span> <span class="fu">if_else</span>(</span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a>      income <span class="sc">==</span> <span class="st">&quot;$100,000 and Over&quot;</span> <span class="sc">|</span> education <span class="sc">==</span> <span class="st">&quot;College graduate or above&quot;</span>,</span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a>      alcohol_day_total <span class="sc">*</span> <span class="fl">1.5</span>,</span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a>      alcohol_day_total</span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a>    )</span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb7-21"><a href="#cb7-21" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">alcohol_extreme_adj =</span> <span class="fu">case_when</span>(</span>
<span id="cb7-22"><a href="#cb7-22" tabindex="-1"></a>    alcohol_adj <span class="sc">&gt;</span> <span class="dv">14</span> <span class="sc">*</span> <span class="fl">1.5</span> <span class="sc">&amp;</span> gender_female <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb7-23"><a href="#cb7-23" tabindex="-1"></a>    alcohol_adj <span class="sc">&gt;</span> <span class="dv">28</span> <span class="sc">*</span> <span class="fl">1.5</span> <span class="sc">&amp;</span> gender_female <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb7-24"><a href="#cb7-24" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span></span>
<span id="cb7-25"><a href="#cb7-25" tabindex="-1"></a>  ))</span>
<span id="cb7-26"><a href="#cb7-26" tabindex="-1"></a></span>
<span id="cb7-27"><a href="#cb7-27" tabindex="-1"></a>df_val2 <span class="ot">&lt;-</span> <span class="fu">data_validation</span>(</span>
<span id="cb7-28"><a href="#cb7-28" tabindex="-1"></a>  <span class="at">data =</span> df_temp2,</span>
<span id="cb7-29"><a href="#cb7-29" tabindex="-1"></a>  <span class="at">true_exposure =</span> <span class="st">&quot;alcohol_extreme_adj&quot;</span>,</span>
<span id="cb7-30"><a href="#cb7-30" tabindex="-1"></a>  <span class="at">true_outcome =</span> <span class="st">&quot;mortstat&quot;</span>,</span>
<span id="cb7-31"><a href="#cb7-31" tabindex="-1"></a>  <span class="at">confounders =</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender_female&quot;</span>, <span class="st">&quot;smoked_100cigs&quot;</span>),</span>
<span id="cb7-32"><a href="#cb7-32" tabindex="-1"></a>  <span class="at">misclassified_exposure =</span> <span class="st">&quot;alcohol_extreme&quot;</span></span>
<span id="cb7-33"><a href="#cb7-33" tabindex="-1"></a>)</span>
<span id="cb7-34"><a href="#cb7-34" tabindex="-1"></a></span>
<span id="cb7-35"><a href="#cb7-35" tabindex="-1"></a><span class="co"># Perform bias adjustment</span></span>
<span id="cb7-36"><a href="#cb7-36" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb7-37"><a href="#cb7-37" tabindex="-1"></a>uc_em_adjusted <span class="ot">&lt;-</span> <span class="fu">multibias_adjust</span>(df_obs2, df_val2)</span>
<span id="cb7-38"><a href="#cb7-38" tabindex="-1"></a></span>
<span id="cb7-39"><a href="#cb7-39" tabindex="-1"></a><span class="co"># Exposure Misclassification &amp; Confounding Adjusted Results:</span></span>
<span id="cb7-40"><a href="#cb7-40" tabindex="-1"></a><span class="fu">print</span>(uc_em_adjusted)</span>
<span id="cb7-41"><a href="#cb7-41" tabindex="-1"></a><span class="co">#&gt; $estimate</span></span>
<span id="cb7-42"><a href="#cb7-42" tabindex="-1"></a><span class="co">#&gt; [1] 1.139375</span></span>
<span id="cb7-43"><a href="#cb7-43" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb7-44"><a href="#cb7-44" tabindex="-1"></a><span class="co">#&gt; $ci</span></span>
<span id="cb7-45"><a href="#cb7-45" tabindex="-1"></a><span class="co">#&gt; [1] 0.8177435 1.5875093</span></span></code></pre></div>
</div>
<div id="adding-selection-bias-adjustment" class="section level3">
<h3>3. Adding Selection Bias Adjustment</h3>
<p>NHANES uses a complex sampling design with oversampling of certain
demographic groups. This can create selection bias if both the exposure
(alcohol consumption) and outcome (mortality) are related to the
selection probability. We’ll adjust for this using the NHANES sampling
weights.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># Create observed data object with all three biases</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>df_obs3 <span class="ot">&lt;-</span> <span class="fu">data_observed</span>(</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>  <span class="at">data =</span> nhanes_filtered,</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>  <span class="at">bias =</span> <span class="fu">c</span>(<span class="st">&quot;em&quot;</span>, <span class="st">&quot;uc&quot;</span>, <span class="st">&quot;sel&quot;</span>),</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  <span class="at">exposure =</span> <span class="st">&quot;alcohol_extreme&quot;</span>,</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>  <span class="at">outcome =</span> <span class="st">&quot;mortstat&quot;</span>,</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>  <span class="at">confounders =</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender_female&quot;</span>)</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>)</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="co"># Prepare data for selection bias adjustment</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>df_temp3a <span class="ot">&lt;-</span> nhanes_filtered <span class="sc">|&gt;</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(smoked_100cigs)) <span class="sc">|&gt;</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a>    <span class="at">alcohol_adj =</span> <span class="fu">if_else</span>(</span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>      income <span class="sc">==</span> <span class="st">&quot;$100,000 and Over&quot;</span> <span class="sc">|</span> education <span class="sc">==</span> <span class="st">&quot;College graduate or above&quot;</span>,</span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a>      alcohol_day_total <span class="sc">*</span> <span class="fl">1.5</span>,</span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a>      alcohol_day_total</span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a>    ),</span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a>    <span class="at">alcohol_extreme_adj =</span> <span class="fu">case_when</span>(</span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a>      alcohol_adj <span class="sc">&gt;</span> <span class="dv">14</span> <span class="sc">*</span> <span class="fl">1.5</span> <span class="sc">&amp;</span> gender_female <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a>      alcohol_adj <span class="sc">&gt;</span> <span class="dv">28</span> <span class="sc">*</span> <span class="fl">1.5</span> <span class="sc">&amp;</span> gender_female <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span></span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a>    ),</span>
<span id="cb8-24"><a href="#cb8-24" tabindex="-1"></a>    <span class="co"># Combine survey weights</span></span>
<span id="cb8-25"><a href="#cb8-25" tabindex="-1"></a>    <span class="at">weight =</span> <span class="fu">if_else</span>(weight_day2 <span class="sc">==</span> <span class="dv">0</span>, weight_day1, weight_day2)</span>
<span id="cb8-26"><a href="#cb8-26" tabindex="-1"></a>  )</span>
<span id="cb8-27"><a href="#cb8-27" tabindex="-1"></a></span>
<span id="cb8-28"><a href="#cb8-28" tabindex="-1"></a><span class="co"># Create selection indicator based on sampling weights</span></span>
<span id="cb8-29"><a href="#cb8-29" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb8-30"><a href="#cb8-30" tabindex="-1"></a>selected_sample <span class="ot">&lt;-</span> <span class="fu">sample</span>(</span>
<span id="cb8-31"><a href="#cb8-31" tabindex="-1"></a>  <span class="at">x =</span> df_temp3a<span class="sc">$</span>seqn,</span>
<span id="cb8-32"><a href="#cb8-32" tabindex="-1"></a>  <span class="at">size =</span> <span class="fu">nrow</span>(df_temp3a),</span>
<span id="cb8-33"><a href="#cb8-33" tabindex="-1"></a>  <span class="at">replace =</span> <span class="cn">TRUE</span>,</span>
<span id="cb8-34"><a href="#cb8-34" tabindex="-1"></a>  <span class="at">prob =</span> df_temp3a<span class="sc">$</span>weight</span>
<span id="cb8-35"><a href="#cb8-35" tabindex="-1"></a>)</span>
<span id="cb8-36"><a href="#cb8-36" tabindex="-1"></a></span>
<span id="cb8-37"><a href="#cb8-37" tabindex="-1"></a>df_selected_sample <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb8-38"><a href="#cb8-38" tabindex="-1"></a><span class="cf">for</span> (id <span class="cf">in</span> selected_sample) {</span>
<span id="cb8-39"><a href="#cb8-39" tabindex="-1"></a>  df_selected_sample <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb8-40"><a href="#cb8-40" tabindex="-1"></a>    df_selected_sample,</span>
<span id="cb8-41"><a href="#cb8-41" tabindex="-1"></a>    df_temp3a[df_temp3a<span class="sc">$</span>seqn <span class="sc">==</span> id, ]</span>
<span id="cb8-42"><a href="#cb8-42" tabindex="-1"></a>  )</span>
<span id="cb8-43"><a href="#cb8-43" tabindex="-1"></a>}</span>
<span id="cb8-44"><a href="#cb8-44" tabindex="-1"></a></span>
<span id="cb8-45"><a href="#cb8-45" tabindex="-1"></a>df_selected_sample<span class="sc">$</span>selection <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb8-46"><a href="#cb8-46" tabindex="-1"></a>df_not_selected_sample <span class="ot">&lt;-</span> df_temp3a[<span class="sc">!</span>(df_temp3a<span class="sc">$</span>seqn <span class="sc">%in%</span> selected_sample), ]</span>
<span id="cb8-47"><a href="#cb8-47" tabindex="-1"></a>df_not_selected_sample<span class="sc">$</span>selection <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb8-48"><a href="#cb8-48" tabindex="-1"></a></span>
<span id="cb8-49"><a href="#cb8-49" tabindex="-1"></a>df_temp3b <span class="ot">&lt;-</span> <span class="fu">rbind</span>(df_selected_sample, df_not_selected_sample)</span>
<span id="cb8-50"><a href="#cb8-50" tabindex="-1"></a></span>
<span id="cb8-51"><a href="#cb8-51" tabindex="-1"></a><span class="co"># Create validation data with selection information</span></span>
<span id="cb8-52"><a href="#cb8-52" tabindex="-1"></a>df_val3 <span class="ot">&lt;-</span> <span class="fu">data_validation</span>(</span>
<span id="cb8-53"><a href="#cb8-53" tabindex="-1"></a>  <span class="at">data =</span> df_temp3b,</span>
<span id="cb8-54"><a href="#cb8-54" tabindex="-1"></a>  <span class="at">true_exposure =</span> <span class="st">&quot;alcohol_extreme_adj&quot;</span>,</span>
<span id="cb8-55"><a href="#cb8-55" tabindex="-1"></a>  <span class="at">true_outcome =</span> <span class="st">&quot;mortstat&quot;</span>,</span>
<span id="cb8-56"><a href="#cb8-56" tabindex="-1"></a>  <span class="at">confounders =</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;gender_female&quot;</span>, <span class="st">&quot;smoked_100cigs&quot;</span>),</span>
<span id="cb8-57"><a href="#cb8-57" tabindex="-1"></a>  <span class="at">misclassified_exposure =</span> <span class="st">&quot;alcohol_extreme&quot;</span>,</span>
<span id="cb8-58"><a href="#cb8-58" tabindex="-1"></a>  <span class="at">selection =</span> <span class="st">&quot;selection&quot;</span></span>
<span id="cb8-59"><a href="#cb8-59" tabindex="-1"></a>)</span>
<span id="cb8-60"><a href="#cb8-60" tabindex="-1"></a></span>
<span id="cb8-61"><a href="#cb8-61" tabindex="-1"></a><span class="co"># Perform final bias adjustment</span></span>
<span id="cb8-62"><a href="#cb8-62" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="cb8-63"><a href="#cb8-63" tabindex="-1"></a>final_adjusted <span class="ot">&lt;-</span> <span class="fu">multibias_adjust</span>(df_obs3, df_val3)</span>
<span id="cb8-64"><a href="#cb8-64" tabindex="-1"></a></span>
<span id="cb8-65"><a href="#cb8-65" tabindex="-1"></a><span class="co"># Triple Bias Adjusted Results:</span></span>
<span id="cb8-66"><a href="#cb8-66" tabindex="-1"></a><span class="fu">print</span>(final_adjusted)</span>
<span id="cb8-67"><a href="#cb8-67" tabindex="-1"></a><span class="co">#&gt; $estimate</span></span>
<span id="cb8-68"><a href="#cb8-68" tabindex="-1"></a><span class="co">#&gt; [1] 1.178683</span></span>
<span id="cb8-69"><a href="#cb8-69" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb8-70"><a href="#cb8-70" tabindex="-1"></a><span class="co">#&gt; $ci</span></span>
<span id="cb8-71"><a href="#cb8-71" tabindex="-1"></a><span class="co">#&gt; [1] 0.9150851 1.5182133</span></span></code></pre></div>
</div>
</div>
<div id="comparing-results" class="section level2">
<h2>Comparing Results</h2>
<p>Let’s compare all our estimates to see how each bias adjustment
affects our results:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># Create comparison table</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>comparison_table <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>  <span class="at">Model =</span> <span class="fu">c</span>(</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>    <span class="st">&quot;Base Model&quot;</span>,</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>    <span class="st">&quot;Adjusted - Single Bias&quot;</span>,</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>    <span class="st">&quot;Adjusted - Double Biases&quot;</span>,</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>    <span class="st">&quot;Adjusted - Triple Biases&quot;</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>  ),</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>  <span class="at">OR =</span> <span class="fu">c</span>(</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>    <span class="fu">round</span>(<span class="fu">exp</span>(<span class="fu">coef</span>(base_mod))[<span class="st">&quot;alcohol_extreme&quot;</span>], <span class="dv">2</span>),</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>    <span class="fu">round</span>(uc_adjusted<span class="sc">$</span>estimate, <span class="dv">2</span>),</span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>    <span class="fu">round</span>(uc_em_adjusted<span class="sc">$</span>estimate, <span class="dv">2</span>),</span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>    <span class="fu">round</span>(final_adjusted<span class="sc">$</span>estimate, <span class="dv">2</span>)</span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>  ),</span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a>  <span class="at">CI_lower =</span> <span class="fu">c</span>(</span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a>    <span class="fu">round</span>(<span class="fu">exp</span>(<span class="fu">confint</span>(base_mod))[<span class="st">&quot;alcohol_extreme&quot;</span>, <span class="dv">1</span>], <span class="dv">2</span>),</span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a>    <span class="fu">round</span>(uc_adjusted<span class="sc">$</span>ci[<span class="dv">1</span>], <span class="dv">2</span>),</span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a>    <span class="fu">round</span>(uc_em_adjusted<span class="sc">$</span>ci[<span class="dv">1</span>], <span class="dv">2</span>),</span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a>    <span class="fu">round</span>(final_adjusted<span class="sc">$</span>ci[<span class="dv">1</span>], <span class="dv">2</span>)</span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a>  ),</span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a>  <span class="at">CI_upper =</span> <span class="fu">c</span>(</span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a>    <span class="fu">round</span>(<span class="fu">exp</span>(<span class="fu">confint</span>(base_mod))[<span class="st">&quot;alcohol_extreme&quot;</span>, <span class="dv">2</span>], <span class="dv">2</span>),</span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a>    <span class="fu">round</span>(uc_adjusted<span class="sc">$</span>ci[<span class="dv">2</span>], <span class="dv">2</span>),</span>
<span id="cb9-24"><a href="#cb9-24" tabindex="-1"></a>    <span class="fu">round</span>(uc_em_adjusted<span class="sc">$</span>ci[<span class="dv">2</span>], <span class="dv">2</span>),</span>
<span id="cb9-25"><a href="#cb9-25" tabindex="-1"></a>    <span class="fu">round</span>(final_adjusted<span class="sc">$</span>ci[<span class="dv">2</span>], <span class="dv">2</span>)</span>
<span id="cb9-26"><a href="#cb9-26" tabindex="-1"></a>  )</span>
<span id="cb9-27"><a href="#cb9-27" tabindex="-1"></a>)</span>
<span id="cb9-28"><a href="#cb9-28" tabindex="-1"></a><span class="co">#&gt; Waiting for profiling to be done...</span></span>
<span id="cb9-29"><a href="#cb9-29" tabindex="-1"></a><span class="co">#&gt; Waiting for profiling to be done...</span></span>
<span id="cb9-30"><a href="#cb9-30" tabindex="-1"></a></span>
<span id="cb9-31"><a href="#cb9-31" tabindex="-1"></a><span class="co"># Comparison of Bias-Adjusted Estimates:</span></span>
<span id="cb9-32"><a href="#cb9-32" tabindex="-1"></a><span class="fu">print</span>(comparison_table)</span>
<span id="cb9-33"><a href="#cb9-33" tabindex="-1"></a><span class="co">#&gt;                      Model   OR CI_lower CI_upper</span></span>
<span id="cb9-34"><a href="#cb9-34" tabindex="-1"></a><span class="co">#&gt; 1               Base Model 1.56     1.10     2.17</span></span>
<span id="cb9-35"><a href="#cb9-35" tabindex="-1"></a><span class="co">#&gt; 2   Adjusted - Single Bias 1.41     1.00     1.99</span></span>
<span id="cb9-36"><a href="#cb9-36" tabindex="-1"></a><span class="co">#&gt; 3 Adjusted - Double Biases 1.14     0.82     1.59</span></span>
<span id="cb9-37"><a href="#cb9-37" tabindex="-1"></a><span class="co">#&gt; 4 Adjusted - Triple Biases 1.18     0.92     1.52</span></span></code></pre></div>
</div>
<div id="discussion" class="section level2">
<h2>Discussion</h2>
<p>This analysis demonstrates how multiple sources of bias can affect
the estimated relationship between alcohol consumption and
mortality:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Uncontrolled Confounding</strong>: Adjusting for smoking
status reduced the odds ratio from 1.56 to 1.41, suggesting that part of
the observed association was due to the confounding effect of
smoking.</p></li>
<li><p><strong>Exposure Misclassification</strong>: Further adjustment
for potential underreporting of alcohol consumption reduced the odds
ratio to 1.14, indicating that measurement error may have led to an
overestimate of the true effect.</p></li>
<li><p><strong>Selection Bias</strong>: The final adjustment for NHANES
sampling weights had minimal impact on the estimate, suggesting that
selection bias may not be a major concern in this analysis.</p></li>
</ol>
<p>These results highlight the importance of considering multiple
sources of bias simultaneously. The <code>multibias</code> package
provides a flexible framework for such analyses, allowing researchers to
incorporate various assumptions about bias mechanisms and assess their
impact on study results.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
